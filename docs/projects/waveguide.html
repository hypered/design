<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>noteed.com &mdash; Blog</title>

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="../static/css/ibm-plex.css" rel="stylesheet" />
    <link href="../static/css/inter.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      type="text/css"
      href="../static/css/tachyons.min.v4.11.1.css"
    />
    <link rel="stylesheet" type="text/css" href="../static/css/style-2019.css" />
  </head>

  <body class="inter lh-copy">
    <div class="mw9 center ph4">
      <header class="pv4">
        <nav class="flex align-items-center lh-copy">
          <a href="../" class="mr3 link black hover-blue">Entrypoint</a>
          <a
            href="../projects/waveguide.html"
            class="mr3 link black hover-blue"
          >
            Waveguide
          </a>
          <a href="../projects/station.html" class="mr3 link black hover-blue">
            Station</a
          >
          <a href="../nubs/smartbe.html" class="mr3 link black hover-blue">
            Work</a
          >
          <a href="../nubs/" class="mr3 link black hover-blue">Nubs</a>
          <a href="../decks/" class="mr3 link black hover-blue">Decks</a>
          <a href="../edit/" class="mr3 link black hover-blue">Edit</a>
          <a href="../more.html" class="mr3 link black hover-blue">More</a>
          <a href="../README.html" class="mr3 link black hover-blue">About</a>
        </nav>
      </header>

      <main class="mw7">
        <div class="flex flex-wrap nl3 nr3">
          <section class="w-100 w-two-thirds-m w-two-thirds-l ph3">
            <article class="measure-wide">
              <h1 class="f2 lh-title mv2">Waveguide</h1>
              <p>
                Waveguide builds and/or runs a Nix expression on a freshly
                provisioned machine.
              </p>
              <p>Waveguide performs the following six steps:</p>
              <ol style="list-style-type: decimal">
                <li><code>doctl compute droplet create</code></li>
                <li><code>nix-x.x-install.sh</code></li>
                <li><code>git clone</code></li>
                <li><code>nix-build</code> or <code>nix run</code></li>
                <li><code>s3cmd sync</code></li>
                <li><code>doctl compute droplet delete</code></li>
              </ol>
              <hr />
              <h2 id="credentials">Credentials</h2>
              <p>The steps 1, 2, and 3 require credentials:</p>
              <ul>
                <li>
                  Creating a new Dropet on DigitalOcean requires an API key.
                </li>
                <li>
                  Cloning a Git repository through the Git protocol requires a
                  private SSH deploy key.
                </li>
                <li>
                  Uploading the build logs, and optionaly the Nix results,
                  requires a secret S3 access key.
                </li>
              </ul>
              <h2 id="input">Input</h2>
              <p>
                Beside the credentials described above, Waveguide is
                parametrized with:
              </p>
              <ul>
                <li>The Nix install script version.</li>
                <li>The Git repository URL and revision.</li>
                <li>
                  Optionaly the name Nix expression attribute names to build.
                </li>
                <li>Optionaly the command to run with Nix.</li>
                <li>The S3 path to upload the logs.</li>
                <li>Optionaly the S3 path to cache the Nix results.</li>
              </ul>
              <p>
                If neither a list of attribute names or a command are given,
                Waveguide instrospects the Nix expression and builds all the
                found attributes.
              </p>
              <h2 id="output">Output</h2>
              <p>
                Waveguide produces logs and optionaly populate a Nix cache on
                S3.
              </p>
            </article>
          </section>

          <aside class="w-100 w-third-m w-third-l ph3 mt0 mt5-m mt5-l">
            <h3 class="f5 lh-title mv2">Latest Runs</h3>
            <div class="nl3 nr3">
              <ul class="bg-near-white list pa3">
                <li class="pv1 bb b--black-10">
                  <a
                    href="../run/282/provisioning.html"
                    class="black hover-blue b"
                  >
                    &rarr; #282
                  </a>
                </li>
                <li class="pv1 bb b--black-10">
                  <a
                    href="../run/281/provisioning.html"
                    class="black hover-blue"
                  >
                    &rarr; #281
                  </a>
                </li>
                <li class="pv1 bb b--black-10">
                  <a
                    href="../run/280/provisioning.html"
                    class="black hover-blue"
                  >
                    &rarr; #280
                  </a>
                </li>
                <li class="pv1 bb b--black-10">
                  <a
                    href="../run/279/provisioning.html"
                    class="black hover-blue"
                  >
                    &rarr; #279
                  </a>
                </li>
                <li class="pv1 bb b--black-10">
                  <a
                    href="../run/278/provisioning.html"
                    class="black hover-blue"
                  >
                    &rarr; #278
                  </a>
                </li>
                <li class="pv1 bb b--black-10">
                  <a
                    href="../run/277/provisioning.html"
                    class="black hover-blue"
                  >
                    &rarr; #277
                  </a>
                </li>
                <li class="pv1 bb b--black-10">
                  <a
                    href="../run/276/provisioning.html"
                    class="black hover-blue"
                  >
                    &rarr; #276
                  </a>
                </li>
                <li class="pv1 bb b--black-10">
                  <a
                    href="../run/275/provisioning.html"
                    class="black hover-blue"
                  >
                    &rarr; #275
                  </a>
                </li>
                <li class="pv1 bb b--black-10">
                  <a
                    href="../run/274/provisioning.html"
                    class="black hover-blue"
                  >
                    &rarr; #274
                  </a>
                </li>
                <li class="pv1 bb b--black-10">
                  <a
                    href="../run/273/provisioning.html"
                    class="black hover-blue"
                  >
                    &rarr; #273
                  </a>
                </li>
                <li class="pv1 bb b--black-10">
                  <a
                    href="../run/272/provisioning.html"
                    class="black hover-blue"
                  >
                    &rarr; #272
                  </a>
                </li>
                <li class="pv1 bb b--black-10">
                  <a
                    href="../run/268/provisioning.html"
                    class="black hover-blue"
                  >
                    &rarr; #268
                  </a>
                </li>
                <li class="pv1 bb b--black-10">
                  <a
                    href="../run/267/provisioning.html"
                    class="black hover-blue"
                  >
                    &rarr; #267
                  </a>
                </li>
                <li class="pv1 bb b--black-10">
                  <a
                    href="../run/266/provisioning.html"
                    class="black hover-blue"
                  >
                    &rarr; #266
                  </a>
                </li>
                <li class="pv1 bb b--black-10">
                  <a
                    href="../run/265/provisioning.html"
                    class="black hover-blue"
                  >
                    &rarr; #265
                  </a>
                </li>
                <li class="pv1 bb b--black-10">
                  <a
                    href="../run/264/provisioning.html"
                    class="black hover-blue"
                  >
                    &rarr; #264
                  </a>
                </li>
                <li class="pv1">
                  <a
                    href="../run/263/provisioning.html"
                    class="black hover-blue"
                  >
                    &rarr; #263
                  </a>
                </li>
              </ul>
            </div>
          </aside>
        </div>
      </main>

      <footer class="mt5 pb4">
        <p>&copy; VÃµ Minh Thu, 2017-2019.</p>
      </footer>
    </div>
  </body>
</html>
